# AtCoder 解法パターンカタログ

## 目次
1. [N が極端に小さい (N ≤ 20)](#1-n-が極端に小さい-n--20)
2. [N が中くらい (N ≤ 50〜500)](#2-n-が中くらい-n--50500)
3. [N が大きめ (N ≤ 2000〜3000)](#3-n-が大きめ-n--20003000)
4. [N がかなり大きい (N ≤ 10⁵〜2×10⁵)](#4-n-がかなり大きい-n--10-2×10)
5. [N が超巨大 (10⁹〜10¹⁸)](#5-n-が超巨大-10-10)
6. [キーワード軸でのショートカット](#6-キーワード軸でのショートカット)

---

## 1. N が極端に小さい (N ≤ 20)

**指数時間アルゴリズムを最初に疑うゾーン。**

### 1-1. よくあるキーワード・状況

- 「全部試せそう」「状態数が小さい」
- 「順番を全部試したい」
- 「部分集合の選び方が肝」
- 「N が 15〜20 くらいで、bit を意識した説明や制約」

### 1-2. 立ち上げる型

#### A. 探索・全探索系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **ビット全探索・部分集合列挙** | N ≈ 16〜20、「使う/使わない」が本質 | 部分和、部分集合 DP の前段階 |
| **順列全探索** | N ≈ 8〜10、「順番」自体が重要 | TSP の愚直、全順列の評価 |
| **半分全列挙** | N ≈ 30〜40、「片側 2^(N/2) に割りたい」 | 2つのグループに分けて、両側から作って合わせるべく二分探索 |
| **枝刈り付きバックトラック DFS** | 制約充足系、パズル系、ナップサック小 N | 全探索しつつも、制約を満たさないところで中断して枝刈り |

#### B. DP 系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **ビット DP** | N ≤ 15〜20、状態が「どの要素を使ったか」に依存 | 巡回セールスマン問題 (TSP) など |

#### C. 数学・その他

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **3進数ビット DP** | 「使う/使わない/保留」の 3 状態管理 | N が小さいが 2 状態では不十分 |

---

## 2. N が中くらい (N ≤ 50〜500)

**O(N³) やフローなど、重めの多項式時間がギリギリ通るゾーン。**

### 2-1. よくあるキーワード・状況

- N ≈ 50〜200、M も同程度
- 「区間 [l, r] をまとめる」「全部の組合せ (i, j) を見る」
- 「全頂点間の距離が欲しい」
- 「ネットワークの最大流・割当て」
- 「DP[i][j] の更新にさらにkのループが必要」

### 2-2. 立ち上げる型

#### A. DP 系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **区間 DP** | N ≤ 50〜60、「区間をマージ」する系 | 括弧列、石取り、最適マージ。区間 [l, r] を分割して solve |
| **2 次元 DP (O(N³) クラス)** | N ≤ 200〜500、DP[i][j] の更新に O(N) | i < jのペアを見るのに、中の分割点 k をすべて試す必要がある DP |

#### B. グラフ・フロー系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **ワーシャル・フロイド** | N ≤ 200 程度、全ペアの距離が必要 | 任意の 2 点間の最短距離を求める |
| **最大流・最小カット** | 頂点数・辺数が数百〜千 | 「流せる最大量」「割り当て」「カット」 |

#### C. 探索・全探索系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **O(N³) 全探索** | N ≤ 200〜300、3重ループで 10⁷〜10⁸ | 総当たり探索 |

---

## 3. N が大きめ (N ≤ 2000〜3000)

**O(N²) が限界ライン。**

### 3-1. よくあるキーワード・状況

- N ≈ 2000〜3000、「全ペアを見る」がギリギリ怪しいサイズ
- 「文字列長 2000 の LCS」「2 次元 DP で N²」
- 「全ての 2 点間の距離を計算」など

### 3-2. 立ち上げる型

#### A. DP 系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **2 次元 DP (O(N²))** | N ≤ 2000〜3000、典型的な DP[i][j] | LCS（最長共通部分列）、編集距離（文字の変形手順数）、ナップサック (容量 × 個数) |

#### B. グラフ・幾何

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **全点対の処理 (O(N²))** | N ≤ 数千、全ペア (i, j) を見ても良い | 幾何での「最近点対」「全距離計算」 |
| **BFS / DFS** | 辺数が N² オーダーの密グラフ | O(N²) に収まる探索 |

---

## 4. N がかなり大きい (N ≤ 10⁵〜2×10⁵)

**実質 O(N log N) か O(N) しか許されない、もっとも典型的なゾーン。**

### 4-1. よくあるキーワード・状況

- N, M, Q が 10⁵ 前後
- 「オンラインでクエリを処理」「動的に追加・削除」
- 「区間和・区間最小」「更新とクエリが混在」
- 「最短路」「木」「Union-Find」「尺取り法」

### 4-2. 立ち上げる型

#### A. ソート・単調性・貪欲

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **ソート＋貪欲** | 区間スケジューリング、締切付きタスク | 締切順、コストの小さい順に処理 |
| **二分探索 (答えに対する二分探索)** | 条件が単調に変化 | 「最大値の最小化」「最小値の最大化」を判定問題化 |

#### B. データ構造

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **Fenwick Tree / セグメント木** | 区間和・区間 min/max、1 点更新 | N, Q ≈ 10⁵、オンラインクエリ、配列っぽい構造 |
| **遅延セグメント木** | 区間更新＋区間クエリ | 「加算」「代入」「アフィン変換」など |
| **ordered set / priority queue** | 「最小 / 最大」「K 番目」「中央値」を管理 | multiset, heap, Treap, PBDS など |

#### C. グラフ・木

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **BFS / DFS** | 無重み最短路、到達性、二部グラフ判定 | 基本的なグラフ探索 |
| **ダイクストラ / 01-BFS / 多源 BFS** | 最短路、「辺に小さい非負重み」「0/1 重み」 | 重み付きグラフの最短路 |
| **木 DP / 全方位木 DP** | N ≤ 10⁵ 程度の木 | パス上の集約、各頂点についての値 |
| **Union-Find (DSU)** | 連結性、森かどうか、オフラインクエリ | 高速な連結判定・統合 |

#### D. 線形時間テク

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **尺取り法** | 要素が非負、または条件が単調 | 「区間を伸ばすと条件が悪化／改善」 |
| **単調スタック・単調キュー** | 「次に自分より小さい (大きい) 要素」 | スタック/キューで単調性を保つ |
| **累積和 / いもす法** | 「最初に全部足しておいて、クエリは O(1)」 | 区間加算、区間和の前計算 |
| **区間の和・連続性利用** | 各要素の寄与が連続整数区間 [L,R]、全体の和も [ΣL,ΣR] と連続 | 2種類資源の均衡、差の最小化。0 を含むかだけ判定 |

---

## 5. N が超巨大 (10⁹〜10¹⁸ など)

**配列を直接持てない。O(√N) や O(log N)、O(1) 数式のみ。**

### 5-1. よくあるキーワード・状況

- 「N が 10⁹〜10¹⁸」「配列を定義したらタイムアウト or メモリ」
- 「数そのものの性質」「約数」「素因数」
- 「ステップ数 K が 10¹⁸」など、大きな反復

### 5-2. 立ち上げる型

#### A. 数論・√N

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **素因数分解 / 約数列挙** | 1 クエリにつき √N まで回してもよい程度 | 整数の性質を調べる基本 |
| **平方分割** | 頻出クエリに対して「バケット分割」 | N が小さくても頻出 |

#### B. O(log N) 系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **行列累乗** | 線形漸化式の n 項目を求める | フィボナッチなど |
| **GCD** | 最大公約数や性質を使う問題 | ユークリッド互除法 |
| **桁 DP** | 「0〜N までの数」を数え上げる系 | 桁数に比例した計算量 |

#### C. 数式・O(1) 系

| 手法 | 条件・キーワード | 説明 |
|------|-----------------|------|
| **組み合わせ・包除原理** | 問題が「数え上げ」に還元できる | nCk、多重集合 |
| **等差数列・等比数列の和** | ループではなく数式で直接出せる | 閉じた形での計算 |

---

## 6. キーワード軸でのショートカット

**N に関係なく、「この単語が見えたらまずこれを疑う」リスト。**

| キーワード | 対応する手法 |
|-----------|------------|
| **最大値の最小化 / 最小値の最大化 / k番目の値** | 答えに対する二分探索 (判定問題化) |
| **辞書順最小 / 最大** | 前から貪欲に「置ける最小 / 最大」を置く |
| **操作の順序は関係ない / 結果だけが重要** | 最終状態だけ見る、または操作回数の偶奇を見る |
| **絶対値の和を最小** | 中央値 |
| **二乗誤差の和を最小** | 平均値 |
| **周期性 / K が非常に大きい (例: 10¹⁸)** | ダブリング or ループ検出 |
| **XOR を最大化** | 線形基底 (basis) or ビット Trie |